<view class="container g-flexbox-column">
    <nav title="蜂巢小剧场" />
    <view class="tabs">
        <van-tabs active="{{activeIndex}}"
            wx:if="{{tabList.length > 0}}"
            bind:change="onTabChange"
            nav-class="tab-nav"
            tab-class="tab-item"
            tab-active-class="tab-active"
            swipeable
            animated
            sticky
        >
            <van-tab
                wx:for="{{tabList}}"
                wx:key="id"
                title="{{item.name}}"
            >
                <scroll-view
                    class="tab-cont"
                    style="height: {{tabContHeight}}px"
                    bindscroll="onScroll"
                    scroll-y
                >
                    <block wx:if="{{activeIndex === 0}}">
                        <view class="search g-flexbox hide" bindtap="gotoSearch">
                            <image class="search-ico" src="/assets/images/search.png" />
                            <text class="search-tip flex"></text>
                        </view>
                        <swiper wx:if="{{banners.length > 0}}"
                            class="banners"
                        >
                            <swiper-item
                                wx:for="{{banners}}"
                                wx:key="id"
                                class="banner-item"
                                autoplay
                                circular
                                data-id="{{item.videoId}}"
                                bindtap="jumpToBannerVideo"
                            >
                                <image class="banner-bg" mode="aspectFill" src="{{item.mainImage}}" />
                                <view class="banner-mask"></view>
                                <view class="banner-tit g-flexbox">
                                    <view class="banner-pic">
                                        <image mode="widthFix" src="{{item.mainImage}}" />
                                    </view>
                                    <view class="banner-cont">
                                        <view class="tit">{{item.title}}</view>
                                        <view class="update-tip">{{item.updateTips}}</view>
                                    </view>
                                    <image class="banner-btn" src="/assets/images/btn3.png" />
                                </view>
                            </swiper-item>
                        </swiper>

                        <block wx:for="{{recmList}}" wx:for-item="row"
                            wx:key="index"
                        >
                            <view class="m1 g-flexbox" wx:if="{{row.type === 1}}">
                                <view class="m1-item" wx:for="{{row.list}}"
                                    wx:key="id"
                                    data-channel="{{item.id}}"
                                    data-title="{{item.name}}"
                                    bindtap="jumpToList"
                                >
                                    <image class="m1-pic" src="/assets/images/ch{{item.id}}.png" />
                                </view>
                            </view>

                            <view class="m2" wx:elif="{{row.type === 2}}">
                                <view class="m2-tit g-flexbox">
                                    <view class="tit-txt flex">{{row.name}}</view>
                                    <view class="m2-more"
                                        data-channel="{{item.id}}"
                                        data-title="{{row.name}}"
                                        bindtap="jumpToList"
                                    >
                                        查看更多
                                        <image class="m2-arrow" src="/assets/images/arrow-right-g.png" />    
                                    </view>
                                </view>
                                <view class="m2-list g-flexbox">
                                    <watched-item
                                        wx:for="{{row.teleplayList}}"
                                        wx:key="id"
                                        item="{{item}}"
                                        data-id="{{item.teleplayId}}"
                                        bind:onClick="jumpToVideo"
                                    />
                                </view>
                            </view>

                            <view class="m2" wx:elif="{{row.type === 3}}">
                                <view class="m2-tit g-flexbox">
                                    <view class="tit-txt flex">{{row.name}}</view>
                                    <view class="m2-more"
                                        data-channel="{{item.id}}"
                                        data-title="{{row.name}}"
                                        bindtap="jumpToList"
                                    >
                                        查看更多
                                        <image class="m2-arrow" src="/assets/images/arrow-right-g.png" />    
                                    </view>
                                </view>
                                <view class="m2-list g-flexbox">
                                    <watched-item
                                        wx:for="{{row.teleplayList}}"
                                        wx:key="id"
                                        item="{{item}}"
                                        data-id="{{item.teleplayId}}"
                                        bind:onClick="jumpToVideo"
                                    />
                                </view>
                            </view>

                            <view class="m2 m4" wx:elif="{{row.type === 4}}">
                                <view class="m2-tit g-flexbox">
                                    <view class="tit-txt flex">{{row.name}}</view>
                                    <view class="m2-more"
                                        data-channel="{{item.id}}"
                                        data-title="{{row.name}}"
                                        bindtap="jumpToList"
                                    >
                                        查看更多
                                        <image class="m2-arrow" src="/assets/images/arrow-right-g.png" />    
                                    </view>
                                </view>
                                <view class="m4-list">
                                    <common-list list="{{row.teleplayList}}" />
                                </view>
                            </view>

                        </block>
                    </block>
                    <block wx:else>
                        <common-list
                            list="{{list}}"
                        />
                    </block>
                </scroll-view>
            </van-tab>
        </van-tabs>
    </view>
    <dialog
        show="{{showDialog}}"
        config="{{dialogConfig}}"
        bind:onCancel="closeDialog"
        bind:onConfirm="changeFollow"
    />
</view>
